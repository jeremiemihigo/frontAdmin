"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[951],{803105:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(624631),i=o(876767),r=o(648623),s=o(346417);const a=(0,i.D)();const l=function(e){let{value:t,setValue:o,options:i,title:l,propr:d}=e;return(0,s.jsx)(r.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?o({title:t}):t&&t.inputValue?o({title:t.inputValue}):o(t)},filterOptions:(e,t)=>a(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:i,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+d],renderOption:(e,t)=>(0,s.jsx)("li",{...e,children:t[""+d]}),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,s.jsx)(n.Z,{...e,label:l||"Titre"})})}},680509:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(936373),i=o(346417);const r=function(e){const{message:t,open:o,setOpen:r}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(n.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:o,onClose:()=>{r(!1)},message:t},"bottom center")})}},936951:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F});var n=o(334811),i=o(747313),r=o(261113),s=o(644758),a=o(624631),l=o(809019),d=o(369099),c=o(585281),h=o(185554),p=o(680509),u=o(811400),g=o(803105),x=o(371207),m=o(808425),v=o(346417);const f=function(e){let{data:t}=e;const[o,n]=i.useState({nom:"",telephone:"",codeAgent:"",fonction:""}),f=(0,h.I0)(),j=(0,h.v9)((e=>e.zone)),[b,Z]=i.useState(""),[w,y]=i.useState(""),{nom:z,telephone:C,codeAgent:S,fonction:k}=o,A=e=>{const{name:t,value:i}=e.target;n({...o,[t]:i})};i.useEffect((()=>{t&&(n({...t}),Z({...null===t||void 0===t?void 0:t.region}),y({...null===t||void 0===t?void 0:t.shop}))}),[t]);const R=(0,h.v9)((e=>e.agent)),[O,N]=i.useState(!1),[F,V]=i.useState();return(0,v.jsxs)("div",{style:{padding:"10px",width:"23rem"},children:["rejected"===R.addAgent&&(0,v.jsx)(p.Z,{message:R.addAgentError,open:O,setOpen:N}),"success"===R.addAgent&&(0,v.jsx)(p.Z,{message:"Enregistrement effectuer",open:!0,setOpen:N}),"success"===R.updateAgent&&(0,v.jsx)(p.Z,{message:"Modification effectu\xe9e",open:!0,setOpen:N}),"rejected"===R.updateAgent&&(0,v.jsx)(p.Z,{message:R.updateAgentError,open:!0,setOpen:N}),F&&(0,v.jsx)(p.Z,{message:F,open:O,setOpen:N}),(0,v.jsx)("div",{className:"mb-3",children:[{id:1,title:"Tech",value:"tech"},{id:2,title:"agent",value:"agent"}].map((e=>(0,v.jsxs)(r.Z,{component:"span",style:{cursor:"pointer"},onClick:()=>n({...o,fonction:e.value}),children:[(0,v.jsx)(s.Z,{checked:k==e.value},e.id),(0,v.jsx)("label",{children:e.title})]},e.id)))}),(0,v.jsx)("div",{children:(0,v.jsx)(a.Z,{className:"textField",onChange:A,value:z,label:"Noms",name:"nom",autoComplete:"off",fullWidth:!0})}),(0,v.jsx)("div",{style:{margin:"10px 0px"},children:(0,v.jsx)(a.Z,{className:"textField",onChange:A,value:C,label:"telephone",name:"telephone",autoComplete:"on",fullWidth:!0})}),(0,v.jsx)("div",{style:{margin:"10px 0px"},children:(0,v.jsx)(a.Z,{className:"textField",onChange:A,value:S,label:"code de l'agent",name:"codeAgent",autoComplete:"off",fullWidth:!0})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.ZP,{sx:{marginTop:"10px"},children:j&&j.zone.length>0&&(0,v.jsx)(g.Z,{value:b,setValue:Z,options:null===j||void 0===j?void 0:j.zone,title:j&&j.zone.length<1?"Loading...":"Regions",propr:"denomination"})}),(0,v.jsx)(l.ZP,{sx:{marginTop:"10px"},children:""!==b&&null!==b&&(0,v.jsx)(g.Z,{value:w,setValue:y,options:b&&b.shop,title:"Shop",propr:"shop"})})]}),(0,v.jsxs)(d.Z,{variant:"contained",disabled:"pending"===j.addZone||"pending"==R.updateAgent,style:{marginTop:"15px"},onClick:t?e=>(()=>{try{if(b.idZone!==w.idZone)V("le shop << ".concat(w.shop," >> n'est pas de la region << ").concat(b.denomination," >>")),N(!0);else{let e={values:o,zoneSelect:null===b||void 0===b?void 0:b.idZone,shop:null===w||void 0===w?void 0:w.idShop};f((0,u.ni)(e))}}catch(e){console.log(e)}})():e=>(e=>{e.preventDefault();try{let e={nom:z,telephone:C,codeAgent:S,fonction:k,idZone:null===b||void 0===b?void 0:b.idZone,idShop:null===w||void 0===w?void 0:w.idShop};f((0,u.LA)(e)),N(!0)}catch(t){}})(e),children:["pending"===j.addZone&&(0,v.jsx)(c.Z,{color:"inherit",size:20}),t?(0,v.jsx)(x.Z,{fontSize:"small"}):(0,v.jsx)(m.Z,{}),(0,v.jsx)("span",{style:{marginLeft:"10px"},children:t?"Modifier":"Enregistrer"})]})]})};var j=o(146482),b=o(861689),Z=o(542420),w=o(270501);const y=(0,o(181171).Z)((0,v.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");var z=o(913029),C=o(348737),S=o(323870),k=o(99885),A=o(661395),R=o(835662);const O=function(){const[e,t]=i.useState(!1),[o,n]=i.useState();return(0,v.jsx)("div",{children:(0,v.jsxs)(l.ZP,{container:!0,children:[(0,v.jsx)(l.ZP,{item:!0,lg:9,children:(0,v.jsx)("form",{children:(0,v.jsx)(S.default,{type:"file",name:"upload",id:"upload",onChange:e=>{if(e.preventDefault(),e.target.files){t(!0);const o=new FileReader;o.onload=e=>{const o=e.target.result,i=C.ij(o,{type:"array"}),r=i.SheetNames[0],s=i.Sheets[r],a=C.P6.sheet_to_json(s);n(a),t(!1)},o.readAsArrayBuffer(e.target.files[0])}}})})}),(0,v.jsx)(l.ZP,{item:!0,lg:3,children:(0,v.jsx)("div",{style:{marginLeft:"10px"},children:(0,v.jsxs)(k.ZP,{disabled:e,type:"primary",onClick:()=>(async()=>{t(!0);let e=[],n=0;try{for(let t=0;t<o.length;t++){if(n+=1,console.log(n),e.push(o[t]),90===n){const t=await R.Z.post(A.V6+"/manyAgent",{data:e},A.vc);console.log(t),n=0,e=[]}if(n<100&&t===o.length-1){const t=await R.Z.post(A.V6+"/manyAgent",{data:e},A.vc);console.log(t)}}}catch(i){t(!1),setExcelFileError(i)}})(),children:[e&&(0,v.jsx)(c.Z,{size:15,sx:{marginRight:"15px"},color:"inherit"})," ",e?"Sending...":"Envoyer"]})})})]})})};function N(){const[e,t]=i.useState(!1),[o,r]=i.useState(!1),s=(0,h.I0)(),[a,l]=i.useState(!1),d=(0,h.v9)((e=>e.agent)),[c,g]=i.useState(),[m,C]=i.useState(""),S=(0,h.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),A=[{field:"nom",headerName:"Noms",width:200,editable:!1},{field:"codeAgent",headerName:"code Agent",width:100,editable:!1},{field:"first",headerName:"Log",width:50,editable:!1,renderCell:e=>e.row.first?(0,v.jsx)("p",{style:{backgroundColor:"red",borderRadius:"50%",height:"10px",width:"50%"},children:"."}):(0,v.jsx)("p",{style:{backgroundColor:"green",color:"green",height:"10px",borderRadius:"50%",width:"50%"},children:"."})},{field:"region.0.denomination",headerName:"Region",width:100,editable:!1,renderCell:e=>e.row.region.denomination},{field:"shop",headerName:"Shop",width:100,editable:!1,renderCell:e=>e.row.shop.shop},{field:"telephone",headerName:"T\xe9l\xe9phone",width:100,editable:!1},{field:"fonction",headerName:"Fonction",width:100,editable:!1,renderCell:e=>(0,v.jsx)("span",{style:{color:"".concat(e.row.active?"blue":"red"),fontWeight:"bolder"},children:e.row.fonction})},{field:"action",headerName:"Action",width:200,editable:!1,renderCell:e=>(0,v.jsxs)("p",{children:["superUser"===(null===S||void 0===S?void 0:S.fonction)&&(0,v.jsx)(b.Z,{title:"Modifiez",children:(0,v.jsx)(Z.Z,{color:"primary",size:"small",onClick:t=>((e,t)=>{t.preventDefault(),g(e),r(!0)})(e.row,t),children:(0,v.jsx)(x.Z,{fontSize:"small"})})}),(0,v.jsx)(v.Fragment,{children:"pending"===d.reinitialiser?(0,v.jsx)(v.Fragment,{children:"Wait..."}):(0,v.jsx)(b.Z,{title:"R\xe9initialisez ses acc\xe8s",sx:{margin:"10px"},children:(0,v.jsx)(Z.Z,{color:"success",size:"small",onClick:()=>{return t=e.row,void s((0,u.Sz)({id:t._id}));var t},children:(0,v.jsx)(y,{fontSize:"small"})})})}),"superUser"===(null===S||void 0===S?void 0:S.fonction)&&(0,v.jsx)(b.Z,{title:e.row.active?"Bloquer":"D\xe9bloquer",children:(0,v.jsx)(Z.Z,{color:"warning",size:"small",onClick:()=>(e=>{C(e._id);let t={id:e._id,value:!e.active};s((0,u.rH)(t)),C("")})(e.row),children:m===e.row._id?"Wait":(0,v.jsx)(z.Z,{fontSize:"small"})})})]})}];return(0,v.jsxs)(w.Z,{elevation:3,sx:{padding:"5px"},children:["superUser"===(null===S||void 0===S?void 0:S.fonction)&&(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsx)("div",{style:{marginRight:"10px"},children:(0,v.jsx)(k.ZP,{onClick:()=>t(!0),type:"primary",children:"Ajoutez un agent"})}),(0,v.jsx)(O,{})]}),a&&(0,v.jsx)(p.Z,{open:a,setOpen:l,message:"Op\xe9ration effectu\xe9e"}),d.agent&&(0,v.jsx)(j._$,{rows:d.agent,columns:A,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10],checkboxSelection:!0,disableRowSelectionOnClick:!0}),(0,v.jsx)(n.Z,{open:e,setOpen:t,title:"Ajoutez un agent",children:(0,v.jsx)(f,{})}),(0,v.jsx)(n.Z,{open:o,setOpen:r,title:"Modifier l'agent",children:(0,v.jsx)(f,{data:c})})]})}const F=(0,i.memo)(N)},334811:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(747313),i=o(966149),r=o(896467),s=o(233604),a=o(850301),l=o(508586),d=o(261113),c=o(346417);const h=n.forwardRef((function(e,t){return(0,c.jsx)(a.Z,{direction:"up",ref:t,...e})}));const p=function(e){let{open:t,children:o,setOpen:n,title:a}=e;return(0,c.jsx)("div",{children:(0,c.jsxs)(i.Z,{open:t,TransitionComponent:h,keepMounted:!0,onClose:()=>{n(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,c.jsxs)(s.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)(d.Z,{children:a}),(0,c.jsx)(l.Z,{fontSize:"small",color:"secondary",style:{cursor:"pointer"},onClick:()=>n(!1)})]}),(0,c.jsx)(r.Z,{children:o})]})})}},913029:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(181171),i=o(346417);const r=(0,n.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block")},542420:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(747313),i=o(683061),r=o(221921),s=o(167999),a=o(691615),l=o(577342),d=o(177430),c=o(132298);function h(e){return(0,c.Z)("MuiFab",e)}const p=(0,d.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var u=o(617592),g=o(346417);const x=(0,u.ZP)(s.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,u.FO)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t["size".concat((0,a.Z)(o.size))],"inherit"===o.color&&t.colorInherit,t[(0,a.Z)(o.size)],t[o.color]]}})((e=>{let{theme:t,ownerState:o}=e;var n,i;return{...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(n=(i=t.palette).getContrastText)?void 0:n.call(i,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},["&.".concat(p.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},..."small"===o.size&&{width:40,height:40},..."medium"===o.size&&{width:48,height:48},..."extended"===o.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},..."extended"===o.variant&&"small"===o.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},..."extended"===o.variant&&"medium"===o.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},..."inherit"===o.color&&{color:"inherit"}}}),(e=>{let{theme:t,ownerState:o}=e;return{..."inherit"!==o.color&&"default"!==o.color&&null!=(t.vars||t).palette[o.color]&&{color:(t.vars||t).palette[o.color].contrastText,backgroundColor:(t.vars||t).palette[o.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[o.color].main}}}}}),(e=>{let{theme:t}=e;return{["&.".concat(p.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),m=n.forwardRef((function(e,t){const o=(0,l.Z)({props:e,name:"MuiFab"}),{children:n,className:s,color:d="default",component:c="button",disabled:p=!1,disableFocusRipple:u=!1,focusVisibleClassName:m,size:v="large",variant:f="circular",...j}=o,b={...o,color:d,component:c,disabled:p,disableFocusRipple:u,size:v,variant:f},Z=(e=>{const{color:t,variant:o,classes:n,size:i}=e,s={root:["root",o,"size".concat((0,a.Z)(i)),"inherit"===t?"colorInherit":t]},l=(0,r.Z)(s,h,n);return{...n,...l}})(b);return(0,g.jsx)(x,{className:(0,i.Z)(Z.root,s),component:c,disabled:p,focusRipple:!u,focusVisibleClassName:(0,i.Z)(Z.focusVisible,m),ownerState:b,ref:t,...j,classes:Z,children:n})}))}}]);