"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[494],{803105:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(624631),i=n(876767),r=n(648623),a=n(346417);const s=(0,i.D)();const l=function(e){let{value:t,setValue:n,options:i,title:l,propr:d}=e;return(0,a.jsx)(r.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>s(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:i,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+d],renderOption:(e,t)=>(0,a.jsx)("li",{...e,children:t[""+d]}),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,a.jsx)(o.Z,{...e,label:l||"Titre"})})}},680509:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(936373),i=n(346417);const r=function(e){const{message:t,open:n,setOpen:r}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,onClose:()=>{r(!1)},message:t},"bottom center")})}},962494:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var o=n(835662),i=n(624631),r=n(369099),a=n(585281),s=n(747313),l=n(185554),d=n(318394),c=n(680509),u=n(346417);const h=function(){const[e,t]=(0,s.useState)(""),n=(0,l.I0)(),o=(0,l.v9)((e=>e.zone)),[h,p]=(0,s.useState)(!1);return(0,u.jsxs)("div",{style:{padding:"10px",width:"20rem"},children:["rejected"===o.addZone&&(0,u.jsx)(c.Z,{message:o.addZoneError,open:h,setOpen:p}),"success"===o.addZone&&(0,u.jsx)(c.Z,{message:"Enregistrement effectuer",open:!0,setOpen:p}),(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsx)(i.Z,{onChange:e=>{e.preventDefault(),t(e.target.value)},value:e,label:"D\xe9nomination",name:"etablissement",autoComplete:"off",fullWidth:!0}),(0,u.jsxs)(r.Z,{sx:{marginLeft:"10px"},variant:"contained",disabled:"pending"===o.addZone,onClick:t=>(t=>{t.preventDefault();try{n((0,d.DS)(e)),p(!0)}catch(o){}})(t),children:["pending"===o.addZone&&(0,u.jsx)(a.Z,{color:"inherit",size:20}),(0,u.jsx)("span",{style:{marginLeft:"10px"},children:"Enregistrer"})]})]})]})};var p=n(661395);const m=(0,n(181171).Z)((0,u.jsx)("path",{d:"M12 3 2 21h20L12 3zm1 5.92L18.6 19H13V8.92zm-2 0V19H5.4L11 8.92z"}),"Details");var g=n(371207),v=n(542420),f=n(270501),x=n(334811),b=n(913029),w=n(146482),Z=n(261113);const j=function(e){let{liste:t}=e;const[n,i]=(0,s.useState)(!1),[r,a]=(0,s.useState)();(0,s.useEffect)((()=>{a(t)}),[t]);const l=[{field:"codeAgent",headerName:"Code",width:100,editable:!1},{field:"nom",headerName:"NOMS",width:180,editable:!1},{field:"telephone",headerName:"Telephone",width:120,editable:!1},{field:"active",headerName:"Status",width:70,editable:!1,renderCell:e=>(0,u.jsx)("span",{className:e.row.active?"green":"red",children:e.row.active?"Actif":"Bloquer"})},{field:"action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,u.jsx)(Z.Z,{onClick:()=>{return t=e.row,void o.Z.put(p.V6+"/bloquer",{id:t._id,value:!t.active},p.vc).then((e=>{200===e.status&&i(!0)}));var t},children:(0,u.jsx)(b.Z,{fontSize:"small"})})},{field:"paswo",headerName:"Reset",width:70,editable:!1,renderCell:e=>(0,u.jsx)(Z.Z,{onClick:()=>{return t=e.row,void o.Z.put(p.V6+"/reset",{id:t._id},p.vc).then((e=>{200===e.status&&i(!0)}));var t},className:"cursor-pointer",children:"Reset"})}];return(0,u.jsxs)("div",{className:"container",children:[n&&(0,u.jsx)(c.Z,{open:n,setOpen:i,message:"Op\xe9ration effectu\xe9e"}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("p",{children:"Agents"}),(0,u.jsx)("div",{className:"col-lg-12",children:r&&r.agentListe.length>0?(0,u.jsx)(w._$,{rows:r.agentListe,columns:l,initialState:{pagination:{paginationModel:{pageSize:7}}},pageSizeOptions:[7],checkboxSelection:!0,disableRowSelectionOnClick:!0}):(0,u.jsx)("p",{className:"red",children:"Aucun agent trouv\xe9"})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("p",{children:"Techniciens"}),(0,u.jsx)("div",{className:"col-lg-12",children:r&&r.techListe.length>0?(0,u.jsx)(w._$,{rows:r.techListe,columns:l,initialState:{pagination:{paginationModel:{pageSize:7}}},pageSizeOptions:[7],checkboxSelection:!0,disableRowSelectionOnClick:!0}):(0,u.jsx)("p",{className:"red",children:"Aucun technicien trouv\xe9"})})]})]})};var S=n(803105),C=n(160609);const z=function(){const[e,t]=(0,s.useState)({shop:"",adresse:""}),{shop:n,adresse:o}=e,d=(0,l.I0)(),c=(0,l.v9)((e=>e.zone.zone)),[h,p]=s.useState("");return(0,u.jsxs)("div",{style:{padding:"10px",width:"20rem"},children:[(0,u.jsx)("div",{children:(0,u.jsx)(i.Z,{onChange:n=>{n.preventDefault(),t({...e,shop:n.target.value})},value:n,label:"Shop *",name:"shop",autoComplete:"off",fullWidth:!0})}),(0,u.jsx)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:(0,u.jsx)(i.Z,{onChange:n=>{n.preventDefault(),t({...e,adresse:n.target.value})},value:o,label:"Adresse du shop",name:"adresse",autoComplete:"off",fullWidth:!0})}),(0,u.jsx)("div",{children:c&&(0,u.jsx)(S.Z,{value:h,setValue:p,options:c,title:"Selectionnez la region",propr:"denomination"})}),(0,u.jsxs)(r.Z,{onClick:e=>(e=>{e.preventDefault(),d((0,C.Bx)({shop:n,adresse:o,idZone:""!==h&&h.idZone}))})(e),sx:{marginTop:"10px"},variant:"contained",fullWidth:!0,children:[(0,u.jsx)(a.Z,{color:"inherit",size:20}),(0,u.jsx)("span",{style:{marginLeft:"10px"},children:"Enregistrer"})]})]})};const k=function(){return(0,u.jsx)("div",{children:(0,u.jsx)(z,{})})};var y=n(99885);const O=function(){const[e,t]=(0,s.useState)(),[n,i]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{const e=await o.Z.get(p.V6+"/zone",p.vc);t(e.data)})()}),[]);const[r,a]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),b=(0,l.v9)((e=>e.shop.shop)),Z=(0,l.v9)((e=>e.user.user)),S=[{field:"idZone",headerName:"ID_Region",width:100,editable:!1},{field:"denomination",headerName:"REGION",width:150,editable:!1},{field:"agent",headerName:"SA",width:70,editable:!1,renderCell:e=>(0,u.jsx)("span",{children:e.row.agentListe.length})},{field:"tech",headerName:"TECH",width:70,editable:!1,renderCell:e=>(0,u.jsx)("span",{children:e.row.techListe.length})},{field:"detail",headerName:"D\xe9tails",width:70,editable:!1,renderCell:e=>(0,u.jsx)(v.Z,{color:"primary",size:"small",onClick:()=>{return t=e.row,c(t),void a(!0);var t},children:(0,u.jsx)(m,{fontSize:"small"})})}],C=[{field:"region",headerName:"REGION",width:80,editable:!1,renderCell:e=>e.row.region.denomination},{field:"idShop",headerName:"ID SHOP",width:100,editable:!1},{field:"shop",headerName:"SHOP",width:100,editable:!1},{field:"tech",headerName:"Techniciens",width:70,editable:!1},{field:"agents",headerName:"Agents",width:70,editable:!1},{field:"detail",headerName:"Actions",width:70,editable:!1,renderCell:()=>(0,u.jsx)(g.Z,{fontSize:"small",color:"primary"})}];return(0,u.jsxs)(f.Z,{elevation:3,sx:{padding:"10px"},children:["superUser"===(null===Z||void 0===Z?void 0:Z.fonction)&&(0,u.jsx)(h,{}),(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsx)("div",{style:{width:"50%"},children:e&&(0,u.jsx)(w._$,{rows:e,columns:S,initialState:{pagination:{paginationModel:{pageSize:6}}},pageSizeOptions:[6],checkboxSelection:!0,disableRowSelectionOnClick:!0})}),(0,u.jsxs)("div",{style:{width:"50%"},children:["superUser"===(null===Z||void 0===Z?void 0:Z.fonction)&&(0,u.jsx)(y.ZP,{type:"primary",onClick:()=>i(!0),children:"Ajoutez un shop"}),b&&(0,u.jsx)(w._$,{rows:b,columns:C,initialState:{pagination:{paginationModel:{pageSize:6}}},pageSizeOptions:[6],checkboxSelection:!0,disableRowSelectionOnClick:!0})]})]}),d&&(0,u.jsx)(x.Z,{open:r,setOpen:a,title:"R\xe9gion ".concat(d.denomination),children:(0,u.jsx)(j,{liste:d})}),(0,u.jsx)(x.Z,{open:n,setOpen:i,title:"Ajoutez un shop",children:(0,u.jsx)(k,{})})]})}},334811:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(747313),i=n(966149),r=n(896467),a=n(233604),s=n(850301),l=n(508586),d=n(261113),c=n(346417);const u=o.forwardRef((function(e,t){return(0,c.jsx)(s.Z,{direction:"up",ref:t,...e})}));const h=function(e){let{open:t,children:n,setOpen:o,title:s}=e;return(0,c.jsx)("div",{children:(0,c.jsxs)(i.Z,{open:t,TransitionComponent:u,keepMounted:!0,onClose:()=>{o(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,c.jsxs)(a.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)(d.Z,{children:s}),(0,c.jsx)(l.Z,{fontSize:"small",color:"secondary",style:{cursor:"pointer"},onClick:()=>o(!1)})]}),(0,c.jsx)(r.Z,{children:n})]})})}},913029:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(181171),i=n(346417);const r=(0,o.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block")},371207:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(181171),i=n(346417);const r=(0,o.Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},542420:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(747313),i=n(683061),r=n(221921),a=n(167999),s=n(691615),l=n(577342),d=n(177430),c=n(132298);function u(e){return(0,c.Z)("MuiFab",e)}const h=(0,d.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var p=n(617592),m=n(346417);const g=(0,p.ZP)(a.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,p.FO)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat((0,s.Z)(n.size))],"inherit"===n.color&&t.colorInherit,t[(0,s.Z)(n.size)],t[n.color]]}})((e=>{let{theme:t,ownerState:n}=e;var o,i;return{...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(o=(i=t.palette).getContrastText)?void 0:o.call(i,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},["&.".concat(h.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},..."small"===n.size&&{width:40,height:40},..."medium"===n.size&&{width:48,height:48},..."extended"===n.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},..."extended"===n.variant&&"small"===n.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},..."extended"===n.variant&&"medium"===n.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},..."inherit"===n.color&&{color:"inherit"}}}),(e=>{let{theme:t,ownerState:n}=e;return{..."inherit"!==n.color&&"default"!==n.color&&null!=(t.vars||t).palette[n.color]&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}}}}),(e=>{let{theme:t}=e;return{["&.".concat(h.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),v=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiFab"}),{children:o,className:a,color:d="default",component:c="button",disabled:h=!1,disableFocusRipple:p=!1,focusVisibleClassName:v,size:f="large",variant:x="circular",...b}=n,w={...n,color:d,component:c,disabled:h,disableFocusRipple:p,size:f,variant:x},Z=(e=>{const{color:t,variant:n,classes:o,size:i}=e,a={root:["root",n,"size".concat((0,s.Z)(i)),"inherit"===t?"colorInherit":t]},l=(0,r.Z)(a,u,o);return{...o,...l}})(w);return(0,m.jsx)(g,{className:(0,i.Z)(Z.root,a),component:c,disabled:h,focusRipple:!p,focusVisibleClassName:(0,i.Z)(Z.focusVisible,v),ownerState:w,ref:t,...b,classes:Z,children:o})}))},936373:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(747313),i=n(221921),r=n(919648),a=n(731685),s=n(276182),l=n(534816);var d=n(617592),c=n(319860),u=n(577342),h=n(691615),p=n(473365),m=n(683061),g=n(217551),v=n(270501),f=n(177430),x=n(132298);function b(e){return(0,x.Z)("MuiSnackbarContent",e)}(0,f.Z)("MuiSnackbarContent",["root","message","action"]);var w=n(346417);const Z=(0,d.ZP)(v.Z,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,o=(0,g._4)(t.palette.background.default,n);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(o),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),j=(0,d.ZP)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),S=(0,d.ZP)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),C=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiSnackbarContent"}),{action:o,className:r,message:a,role:s="alert",...l}=n,d=n,c=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"],action:["action"],message:["message"]},b,t)})(d);return(0,w.jsxs)(Z,{role:s,square:!0,elevation:6,className:(0,m.Z)(c.root,r),ownerState:d,ref:t,...l,children:[(0,w.jsx)(j,{className:c.message,ownerState:d,children:a}),o?(0,w.jsx)(S,{className:c.action,ownerState:d,children:o}):null]})}));function z(e){return(0,x.Z)("MuiSnackbar",e)}(0,f.Z)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const k=(0,d.ZP)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["anchorOrigin".concat((0,h.Z)(n.anchorOrigin.vertical)).concat((0,h.Z)(n.anchorOrigin.horizontal))]]}})((e=>{let{theme:t,ownerState:n}=e;return{zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",..."top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},..."left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},..."right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},[t.breakpoints.up("sm")]:{..."top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},..."center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},..."left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},..."right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"}}}})),y=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiSnackbar"}),d=(0,c.Z)(),m={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{action:g,anchorOrigin:{vertical:v,horizontal:f}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:b,className:Z,ClickAwayListenerProps:j,ContentProps:S,disableWindowBlurListener:y=!1,message:O,onBlur:N,onClose:R,onFocus:L,onMouseEnter:M,onMouseLeave:E,open:T,resumeHideDuration:D,TransitionComponent:A=p.Z,transitionDuration:P=m,TransitionProps:{onEnter:I,onExited:V,...B}={},...F}=n,H={...n,anchorOrigin:{vertical:v,horizontal:f},autoHideDuration:x,disableWindowBlurListener:y,TransitionComponent:A,transitionDuration:P},W=(e=>{const{classes:t,anchorOrigin:n}=e,o={root:["root","anchorOrigin".concat((0,h.Z)(n.vertical)).concat((0,h.Z)(n.horizontal))]};return(0,i.Z)(o,z,t)})(H),{getRootProps:_,onClickAway:G}=function(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:i,open:r,resumeHideDuration:a}=e,d=o.useRef();o.useEffect((()=>{if(r)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[r,i]);const c=(0,s.Z)(((e,t)=>{null==i||i(e,t)})),u=(0,s.Z)((e=>{i&&null!=e&&(clearTimeout(d.current),d.current=setTimeout((()=>{c(null,"timeout")}),e))}));o.useEffect((()=>(r&&u(t),()=>{clearTimeout(d.current)})),[r,t,u]);const h=()=>{clearTimeout(d.current)},p=o.useCallback((()=>{null!=t&&u(null!=a?a:.5*t)}),[t,a,u]),m=e=>t=>{const n=e.onBlur;null==n||n(t),p()},g=e=>t=>{const n=e.onFocus;null==n||n(t),h()},v=e=>t=>{const n=e.onMouseEnter;null==n||n(t),h()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),p()};return o.useEffect((()=>{if(!n&&r)return window.addEventListener("focus",p),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",h)}}),[n,p,r]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={...(0,l.Z)(e),...t};return{role:"presentation",...n,onBlur:m(n),onFocus:g(n),onMouseEnter:v(n),onMouseLeave:f(n)}},onClickAway:e=>{null==i||i(e,"clickaway")}}}({...H}),[$,q]=o.useState(!0),K=(0,r.Z)({elementType:k,getSlotProps:_,externalForwardedProps:F,ownerState:H,additionalProps:{ref:t},className:[W.root,Z]});return!T&&$?null:(0,w.jsx)(a.Z,{onClickAway:G,...j,children:(0,w.jsx)(k,{...K,children:(0,w.jsx)(A,{appear:!0,in:T,timeout:P,direction:"top"===v?"down":"up",onEnter:(e,t)=>{q(!1),I&&I(e,t)},onExited:e=>{q(!0),V&&V(e)},...B,children:b||(0,w.jsx)(C,{message:O,action:g,...S})})})})}))}}]);