/*! For license information please see 754.e7104f93.chunk.js.LICENSE.txt */
(self.webpackChunkfront=self.webpackChunkfront||[]).push([[754],{803105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(624631),o=n(876767),i=n(648623),a=n(346417);const s=(0,o.D)();const c=function(e){let{value:t,setValue:n,options:o,title:c,propr:l}=e;return(0,a.jsx)(i.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>s(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:o,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+l],renderOption:(e,t)=>(0,a.jsx)("li",{...e,children:t[""+l]}),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,a.jsx)(r.Z,{...e,label:c||"Titre"})})}},680509:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(936373),o=n(346417);const i=function(e){const{message:t,open:n,setOpen:i}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(r.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,onClose:()=>{i(!1)},message:t},"bottom center")})}},792628:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(747313),o=n(582294),i=n(565280),a=n(261113),s=n(557829),c=n(346417);function l(e){const{children:t,value:n,index:r,...o}=e;return(0,c.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...o,children:n===r&&(0,c.jsx)(s.Z,{sx:{p:3},children:(0,c.jsx)(a.Z,{component:"div",children:t})})})}function u(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function d(e){let{titres:t,components:n}=e;const[a,d]=r.useState(0);return(0,c.jsxs)(s.Z,{sx:{width:"100%"},children:[(0,c.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,c.jsx)(o.Z,{value:a,onChange:(e,t)=>{d(t)},"aria-label":"icon label tabs example",style:{padding:"0px",margin:"0px"},children:t.map(((e,t)=>(0,r.createElement)(i.Z,{label:e.label,...u(e.id),key:t})))})}),n.map(((e,t)=>(0,c.jsx)(l,{value:a,index:e.id,children:e.component},t)))]})}const p=r.memo(d)},571659:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});n(747313);var r=n(70816),o=n.n(r),i=(n(208890),n(346417));const a=function(e){let{demandes:t}=e;return(0,i.jsx)("div",{className:"chats",children:t&&t.length>0&&t.map((e=>(0,i.jsxs)("div",{className:"co"===e.sender?"co":"agent",children:[(0,i.jsx)("p",{children:e.message}),(0,i.jsxs)("p",{style:{fontSize:"11px"},children:[(0,i.jsx)("span",{style:{textAlign:"center"},children:e.codeAgent}),(0,i.jsx)("span",{style:{float:"right"},children:o()(e.createdAt).fromNow()})]})]},e._id)))})}},108262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var r=n(747313),o=n(661395),i=n(950381),a=(n(421331),n(792628)),s=n(835662),c=n(323870),l=n(185554),u=n(346417);const{TextArea:d}=c.default;const p=function(e){let{demande:t,update:n}=e;const[i,a]=(0,r.useState)(""),c=(0,l.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user}));return(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)(d,{required:!0,value:i,onKeyUp:e=>(e=>{if(n&&13===e.keyCode&&""!==i){a("");const e={_id:n.demande._id,message:i,sender:"co",codeAgent:null===c||void 0===c?void 0:c.codeAgent};s.Z.post(o.V6+"/reclamation",e,o.vc).then((()=>{a("")})).catch((function(e){console.log(e)}))}if(t&&13===e.keyCode&&""!==i){a("");const e={_id:t._id,message:i,sender:"co",codeAgent:null===c||void 0===c?void 0:c.codeAgent};s.Z.post(o.V6+"/reclamation",e,o.vc).then((()=>{a("")})).catch((function(e){console.log(e)}))}})(e),onChange:e=>{e.preventDefault(),a(e.target.value)},placeholder:"Message",autoSize:{minRows:3,maxRows:5}})})})};var f=n(809019),m=n(624631),h=n(369099),y=n(371207),g=n(808425),x=n(65387),v=n(754381),b=n(803105),j=n(557829),C=n(301550),T=n(116429),w=n(183929),S=n(644758),O=n(680509),A=n(157983),E=n(585281),Z=n(91554);const P=function(e){let{update:t}=e;const n=(0,l.v9)((e=>e.zone.zone)),[a,c]=r.useState(""),[d,p]=r.useState(""),[P,k]=r.useState(!1),[D,N]=r.useState(!1),[I,L]=r.useState({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),R=e=>{const{name:t,value:n}=e.target;L({...I,[t]:n})},{demande:_}=(0,r.useContext)(i.R),{codeCu:z,codeClient:M,consExpDays:B,nomClient:F}=I;let[V,q]=r.useState({payement:"",statut:""});const{payement:U,statut:H}=V,[W,K]=r.useState(""),[Y,$]=r.useState(!1);function G(){L({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),q({payement:"",statut:""}),c(""),p("")}console.log(_);const J=(0,l.v9)((e=>e.reponse)),[Q,X]=r.useState(""),ee=e=>{X(""),L({...I,consExpDays:e});let t="",n="";return e>=0&&(t="installed",n="normal"),e>=-30&&e<=-1&&(t="installed",n="expired"),e>=-44&&e<=-31&&(t="installed",n="defaulted"),e<=-45&&(t="pending repossession",n="defaulted"),isNaN(e)&&(t="",n=""),q({payement:n,statut:t}),{payement:n,statut:t}},te=(0,l.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),ne=(0,l.I0)(),re=()=>{if(a&&d&&a.idZone!==d.idZone)K("Veuillez v\xe9rifier si le shop est enregistr\xe9 dans la region selection\xe9e"),$(!0);else if(te&&"co"!==te.fonction)K("Cette espace est reserv\xe9e aux C.O"),$(!0),N(!1);else if(_.shopAgent.idShop!==d.idShop)K("y a pas une conformit\xe9 entre le shop du client << ".concat(d.shop," >> et celui de l'agent << ").concat(_.shopAgent.shop," >>")),$(!0);else{k(!0);const e={idDemande:_.idDemande,codeClient:M.toUpperCase(),codeCu:z,codeAgent:null===te||void 0===te?void 0:te.codeAgent,clientStatut:H,PayementStatut:U,consExpDays:B,nomClient:F,idZone:a.idZone,idShop:d.idShop};ne((0,x.Z1)(e)),k(!1),G()}};r.useEffect((()=>{if(t){let e={consExpDays:t.consExpDays,codeClient:t.codeclient,codeCu:t.codeCu};ee(t.consExpDays),L({...I,...e})}}),[t]);const oe=(e,t)=>{t.preventDefault(),X(e),q("inactive"===e?{payement:"terminated",statut:"inactive"}:{payement:"pending fulfliment",statut:"pending activation"})},ie=async()=>{if(M.length>10){N(!0);const e=await s.Z.get("".concat(o.V6,"/customer/").concat(M));200===e.status?(L({...I,codeCu:e.data.customer_cu,nomClient:e.data.nomClient,consExpDays:""}),p(e.data.shop),c(e.data.region),N(!1)):(N(!1),L({...I,codeCu:"",nomClient:"",consExpDays:""}),c(""),p(""))}};return(0,u.jsxs)(f.ZP,{children:["pending"===J.postDemande&&(0,u.jsx)(Z.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,u.jsx)("div",{children:(0,u.jsxs)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:["Sending ",null===_||void 0===_?void 0:_.idDemande,"..."]})})}),"rejected"===J.postDemande&&(0,u.jsx)(v.Z,{variant:"filled",severity:"error",children:J.postDemandeError}),Y&&(0,u.jsx)(O.Z,{message:W,open:Y,setOpen:$}),(0,u.jsxs)(f.ZP,{container:!0,children:[(0,u.jsx)(f.ZP,{item:!0,lg:10,xs:10,children:(0,u.jsx)(m.Z,{style:{marginTop:"10px"},onChange:e=>R(e),name:"codeClient",onKeyUp:e=>(e=>{13===e.keyCode&&ie()})(e),autoComplete:"off",fullWidth:!0,value:M,label:"Code du Client"})}),(0,u.jsx)(f.ZP,{item:!0,lg:2,xs:2,sx:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:D?(0,u.jsx)(E.Z,{size:15}):(0,u.jsx)(A.default,{onClick:e=>ie(),fontSize:"small"})})]}),(0,u.jsx)(m.Z,{style:{marginTop:"10px"},onChange:e=>R(e),name:"nomClient",autoComplete:"off",fullWidth:!0,value:F,label:"Nom du Client"}),(0,u.jsx)(m.Z,{style:{marginTop:"10px"},onChange:e=>R(e),value:z,name:"codeCu",autoComplete:"off",fullWidth:!0,label:"Code CU"}),(0,u.jsxs)(f.ZP,{container:!0,children:[(0,u.jsx)(f.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px"},children:(0,u.jsx)(b.Z,{value:a,setValue:c,options:n,title:n&&n.length<1?"Loading...":"Regions",propr:"denomination"})}),(0,u.jsx)(f.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px"},children:""!==a&&null!==a&&(0,u.jsx)(b.Z,{value:d,setValue:p,options:a&&a.shop,title:"Shop",propr:"shop"})})]}),(0,u.jsxs)("div",{className:"expiredDate",children:[(0,u.jsx)(m.Z,{onChange:e=>ee(e.target.value),style:{marginTop:"10px"},name:"consExpDays",autoComplete:"off",fullWidth:!0,onKeyUp:t?()=>{}:e=>(e=>{13===e.keyCode&&re()})(e),value:B,label:"consExpDays"}),(0,u.jsxs)(j.Z,{sx:{display:"flex"},children:[(0,u.jsx)(C.Z,{component:"fieldset",variant:"standard",children:(0,u.jsx)(T.Z,{children:(0,u.jsx)(w.Z,{onClick:e=>oe("inactive",e),control:(0,u.jsx)(S.Z,{name:"inactive",checked:"inactive"===Q}),label:"Inactive"})})}),(0,u.jsx)(C.Z,{component:"fieldset",variant:"standard",children:(0,u.jsx)(T.Z,{children:(0,u.jsx)(w.Z,{onClick:e=>oe("pending",e),control:(0,u.jsx)(S.Z,{name:"pending",checked:"pending"===Q}),label:"Pending activation"})})})]})]}),(0,u.jsx)(m.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),q({...V,statut:e.target.value})},name:"statut",autoComplete:"off",fullWidth:!0,value:H,label:"Statut du client"}),(0,u.jsx)(m.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),q({...V,payement:e.target.value})},name:"payement",autoComplete:"off",fullWidth:!0,value:U,label:"Statut Payement"}),(0,u.jsx)("div",{style:{marginTop:"10px"},children:(0,u.jsxs)(h.Z,{disabled:!((_||t)&&!P),fullWidth:!0,variant:"contained",color:"primary",onClick:t?()=>(async()=>{$(!1),s.Z.put(o.V6+"/reponse",{idReponse:t._id,data:{codeclient:M,nomClient:F,codeCu:z,clientStatut:H,PayementStatut:U,consExpDays:B}},o.vc).then((e=>{K(e.data),G(),$(!0)})).catch((e=>{console.log(e)}))})():e=>{e.preventDefault(),re()},children:[t?(0,u.jsx)(y.Z,{fontSize:"small"}):(0,u.jsx)(g.Z,{fontSize:"small"})," ",(0,u.jsxs)("span",{style:{marginLeft:"10px"},children:[" ",t?"Update":"Save"]})]})})]})};var k=n(261113),D=n(396180),N=n(846968),I=n(527952),L=n(571659);function R(e){const{update:t}=e,{demande:n}=(0,r.useContext)(i.R),s=[{id:0,component:(0,u.jsx)(P,{update:t})},{id:1,component:(0,u.jsx)(p,{demande:n,update:t})}],c=e=>!e&&"red",[l,d]=D.ZP.useMessage();function m(e){let{demandes:t}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"demandeJsx",style:{textAlign:"justify"},children:[(0,u.jsxs)("p",{children:["ID demande : ",t.idDemande]}),(0,u.jsxs)(k.Z,{component:"p",className:"codeClient",onClick:()=>{return e=t.codeclient,navigator.clipboard.writeText(e),void l.open({type:"success",content:"Done "+e,duration:2});var e},style:{color:c(t.codeclient)},children:["code client : ",t.codeclient&&t.codeclient.toUpperCase()]}),(0,u.jsxs)("p",{style:{color:c(t.numero)},children:["Num\xe9ro joignable du client: ",t.numero]}),(0,u.jsxs)("p",{children:["Statut du client : ","".concat("allumer"===t.statut?"allum\xe9":"\xe9teint")," "]}),(0,u.jsxs)("p",{children:["Feedback : ",t.raison.toLowerCase()]})]}),(0,u.jsx)(L.Z,{demandes:t.conversation})]})}return(0,u.jsxs)(f.ZP,{container:!0,children:[(0,u.jsx)(u.Fragment,{children:d}),(0,u.jsx)(f.ZP,{item:!0,lg:6,children:n||t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(N.Z,{size:12,children:(0,u.jsx)(I.Z,{width:200,src:"".concat(o.BP,"/").concat(t?t.demande.file:n.file),placeholder:(0,u.jsx)(I.Z,{preview:!1,src:"".concat(o.BP,"/").concat(t?t.demande.file:n.file),width:200})})}),n&&!t&&(0,u.jsx)(m,{demandes:n}),t&&(0,u.jsx)(m,{demandes:t.demande})]}):(0,u.jsx)("p",{style:_.center,children:"Veuillez selectionner la demande"})}),(0,u.jsx)(f.ZP,{item:!0,lg:6,children:(0,u.jsx)(a.Z,{titres:[{id:0,label:"Reponse"},{id:1,label:"Feedback"}],components:s})})]})}const _={span:{color:"#0078",fontWeight:"bold",marginRight:"5px",marginLeft:"5px"},center:{textAlign:"center",color:"red"}},z=r.memo(R)},522754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ze});var r=n(809019),o=n(873428),i=(n(421331),n(747313)),a=n(661395),s=n(70816),c=n.n(s),l=n(950381),u=n(835662),d=n(416031),p=n.n(d),f=n(792628),m=n(844730),h=n(323870),y=n(571659),g=n(346417);const x=function(e){let{setError:t}=e;const{setDemande:n}=i.useContext(l.R),[s,d]=i.useState([]),[p,f]=i.useState(!1);i.useEffect((()=>{(async()=>{try{f(!0),d([]);const e=await u.Z.get(a.V6+"/demandeIncorrect",a.vc);200===e.status&&(d(e.data),f(!1))}catch(e){"ERR_NETWORK"===e.code&&(f(!1),t("Rassurez-vous que votre appareil a une connexion active"))}})()}),[]);const[m,x]=i.useState({fn:e=>e});return(0,g.jsxs)("div",{className:"listeDemandeFeedback",children:[(0,g.jsx)(r.ZP,{container:!0,children:(0,g.jsx)(r.ZP,{item:!0,lg:12,sx:{paddingRight:"10px"},children:(0,g.jsx)(h.default,{onChange:e=>(e=>{let t=e.target.value.toLowerCase();x({fn:e=>""===t?e:e.filter((e=>e.idDemande.includes(t)))})})(e),placeholder:"Cherchez un message"})})}),p&&(0,g.jsx)("p",{style:{textAlign:"center",fontWeight:"bolder"},children:"Please wait..."}),s&&m.fn(s).map((e=>{var t;return(0,g.jsx)("div",{children:(0,g.jsxs)(o.Z,{onClick:t=>{t.preventDefault(),n(e)},style:{cursor:"pointer",padding:"5px",marginBottom:"4px"},children:[(0,g.jsxs)("div",{className:"allP",children:[(0,g.jsxs)("p",{children:[" ",e.idDemande,"; ",e.codeclient&&e.codeclient," "]}),(0,g.jsxs)("p",{children:[e.statut,"; ",e.raison&&e.raison]}),(0,g.jsxs)("p",{style:{fontSize:"9px",width:"100%"},children:[(0,g.jsx)("span",{children:null===(t=e.agent)||void 0===t?void 0:t.nom}),(0,g.jsx)("span",{style:{float:"right"},children:c()(e.createdAt).fromNow()})]})]}),(0,g.jsx)("div",{children:(0,g.jsx)(y.Z,{demandes:e.conversation})})]})},e._id)}))]})};var v=n(185554),b=n(375192),j=n.n(b),C=n(954063),T=n.n(C),w=n(938095),S=n.n(w),O=n(671843),A=n.n(O),E="bodyAttributes",Z="htmlAttributes",P="titleAttributes",k={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},D=(Object.keys(k).map((function(e){return k[e]})),"charset"),N="cssText",I="href",L="http-equiv",R="innerHTML",_="itemprop",z="name",M="property",B="rel",F="src",V="target",q={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},U="defaultTitle",H="defer",W="encodeSpecialCharacters",K="onChangeClientState",Y="titleTemplate",$=Object.keys(q).reduce((function(e,t){return e[q[t]]=t,e}),{}),G=[k.NOSCRIPT,k.SCRIPT,k.STYLE],J="data-react-helmet",Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},ne=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},re=function(e){var t=ce(e,k.TITLE),n=ce(e,Y);if(n&&t)return n.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var r=ce(e,U);return t||r||void 0},oe=function(e){return ce(e,K)||function(){}},ie=function(e,t){return t.filter((function(t){return"undefined"!==typeof t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return ee({},e,t)}),{})},ae=function(e,t){return t.filter((function(e){return"undefined"!==typeof e[k.BASE]})).map((function(e){return e[k.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o].toLowerCase();if(-1!==e.indexOf(i)&&n[i])return t.concat(n)}return t}),[])},se=function(e,t,n){var r={};return n.filter((function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&fe("Helmet: "+e+' should be of type "Array". Instead found type "'+Q(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var o={};n.filter((function(e){for(var n=void 0,i=Object.keys(e),a=0;a<i.length;a++){var s=i[a],c=s.toLowerCase();-1===t.indexOf(c)||n===B&&"canonical"===e[n].toLowerCase()||c===B&&"stylesheet"===e[c].toLowerCase()||(n=c),-1===t.indexOf(s)||s!==R&&s!==N&&s!==_||(n=s)}if(!n||!e[n])return!1;var l=e[n].toLowerCase();return r[n]||(r[n]={}),o[n]||(o[n]={}),!r[n][l]&&(o[n][l]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var i=Object.keys(o),a=0;a<i.length;a++){var s=i[a],c=A()({},r[s],o[s]);r[s]=c}return e}),[]).reverse()},ce=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},le=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout((function(){le(t)}),0)}}(),ue=function(e){return clearTimeout(e)},de="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||le:n.g.requestAnimationFrame||le,pe="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ue:n.g.cancelAnimationFrame||ue,fe=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},me=null,he=function(e,t){var n=e.baseTag,r=e.bodyAttributes,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.onChangeClientState,l=e.scriptTags,u=e.styleTags,d=e.title,p=e.titleAttributes;xe(k.BODY,r),xe(k.HTML,o),ge(d,p);var f={baseTag:ve(k.BASE,n),linkTags:ve(k.LINK,i),metaTags:ve(k.META,a),noscriptTags:ve(k.NOSCRIPT,s),scriptTags:ve(k.SCRIPT,l),styleTags:ve(k.STYLE,u)},m={},h={};Object.keys(f).forEach((function(e){var t=f[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(h[e]=f[e].oldTags)})),t&&t(),c(e,m,h)},ye=function(e){return Array.isArray(e)?e.join(""):e},ge=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=ye(e)),xe(k.TITLE,t)},xe=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(J),o=r?r.split(","):[],i=[].concat(o),a=Object.keys(t),s=0;s<a.length;s++){var c=a[s],l=t[c]||"";n.getAttribute(c)!==l&&n.setAttribute(c,l),-1===o.indexOf(c)&&o.push(c);var u=i.indexOf(c);-1!==u&&i.splice(u,1)}for(var d=i.length-1;d>=0;d--)n.removeAttribute(i[d]);o.length===i.length?n.removeAttribute(J):n.getAttribute(J)!==a.join(",")&&n.setAttribute(J,a.join(","))}},ve=function(e,t){var n=document.head||document.querySelector(k.HEAD),r=n.querySelectorAll(e+"["+J+"]"),o=Array.prototype.slice.call(r),i=[],a=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===R)n.innerHTML=t.innerHTML;else if(r===N)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var s="undefined"===typeof t[r]?"":t[r];n.setAttribute(r,s)}n.setAttribute(J,"true"),o.some((function(e,t){return a=t,n.isEqualNode(e)}))?o.splice(a,1):i.push(n)})),o.forEach((function(e){return e.parentNode.removeChild(e)})),i.forEach((function(e){return n.appendChild(e)})),{oldTags:o,newTags:i}},be=function(e){return Object.keys(e).reduce((function(t,n){var r="undefined"!==typeof e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[q[n]||n]=e[n],t}),t)},Ce=function(e,t,n){switch(e){case k.TITLE:return{toComponent:function(){return function(e,t,n){var r,o=((r={key:t})[J]=!0,r),a=je(n,o);return[i.createElement(k.TITLE,a,t)]}(0,t.title,t.titleAttributes)},toString:function(){return function(e,t,n,r){var o=be(n),i=ye(t);return o?"<"+e+" "+J+'="true" '+o+">"+ne(i,r)+"</"+e+">":"<"+e+" "+J+'="true">'+ne(i,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case E:case Z:return{toComponent:function(){return je(t)},toString:function(){return be(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,o=((r={key:n})[J]=!0,r);return Object.keys(t).forEach((function(e){var n=q[e]||e;if(n===R||n===N){var r=t.innerHTML||t.cssText;o.dangerouslySetInnerHTML={__html:r}}else o[n]=t[e]})),i.createElement(e,o)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var o=Object.keys(r).filter((function(e){return!(e===R||e===N)})).reduce((function(e,t){var o="undefined"===typeof r[t]?t:t+'="'+ne(r[t],n)+'"';return e?e+" "+o:o}),""),i=r.innerHTML||r.cssText||"",a=-1===G.indexOf(e);return t+"<"+e+" "+J+'="true" '+o+(a?"/>":">"+i+"</"+e+">")}),"")}(e,t,n)}}}},Te=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.scriptTags,l=e.styleTags,u=e.title,d=void 0===u?"":u,p=e.titleAttributes;return{base:Ce(k.BASE,t,r),bodyAttributes:Ce(E,n,r),htmlAttributes:Ce(Z,o,r),link:Ce(k.LINK,i,r),meta:Ce(k.META,a,r),noscript:Ce(k.NOSCRIPT,s,r),script:Ce(k.SCRIPT,c,r),style:Ce(k.STYLE,l,r),title:Ce(k.TITLE,{title:d,titleAttributes:p},r)}},we=function(e){var t,n;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.shouldComponentUpdate=function(e){return!S()(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case k.SCRIPT:case k.NOSCRIPT:return{innerHTML:t};case k.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,o=e.newChildProps,i=e.nestedChildren;return ee({},r,((t={})[n.type]=[].concat(r[n.type]||[],[ee({},o,this.mapNestedChildrenToProps(n,i))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,o=e.newProps,i=e.newChildProps,a=e.nestedChildren;switch(r.type){case k.TITLE:return ee({},o,((t={})[r.type]=a,t.titleAttributes=ee({},i),t));case k.BODY:return ee({},o,{bodyAttributes:ee({},i)});case k.HTML:return ee({},o,{htmlAttributes:ee({},i)})}return ee({},o,((n={})[r.type]=ee({},i),n))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=ee({},t);return Object.keys(e).forEach((function(t){var r;n=ee({},n,((r={})[t]=e[t],r))})),n},n.prototype.warnOnInvalidChildren=function(e,t){return!0},n.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return i.Children.forEach(e,(function(e){if(e&&e.props){var o=e.props,i=o.children,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[$[n]||n]=e[n],t}),t)}(te(o,["children"]));switch(n.warnOnInvalidChildren(e,i),e.type){case k.LINK:case k.META:case k.NOSCRIPT:case k.SCRIPT:case k.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:a,nestedChildren:i});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:i})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},n.prototype.render=function(){var t=this.props,n=t.children,r=te(t,["children"]),o=ee({},r);return n&&(o=this.mapChildrenToProps(n,o)),i.createElement(e,o)},X(n,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(i.Component),t.propTypes={base:j().object,bodyAttributes:j().object,children:j().oneOfType([j().arrayOf(j().node),j().node]),defaultTitle:j().string,defer:j().bool,encodeSpecialCharacters:j().bool,htmlAttributes:j().object,link:j().arrayOf(j().object),meta:j().arrayOf(j().object),noscript:j().arrayOf(j().object),onChangeClientState:j().func,script:j().arrayOf(j().object),style:j().arrayOf(j().object),title:j().string,titleAttributes:j().object,titleTemplate:j().string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=Te({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},n}(T()((function(e){return{baseTag:ae([I,V],e),bodyAttributes:ie(E,e),defer:ce(e,H),encode:ce(e,W),htmlAttributes:ie(Z,e),linkTags:se(k.LINK,[B,I],e),metaTags:se(k.META,[z,D,L,M,_],e),noscriptTags:se(k.NOSCRIPT,[R],e),onChangeClientState:oe(e),scriptTags:se(k.SCRIPT,[F,R],e),styleTags:se(k.STYLE,[N],e),title:re(e),titleAttributes:ie(P,e)}}),(function(e){me&&pe(me),e.defer?me=de((function(){he(e,(function(){me=null}))})):(he(e),me=null)}),Te)((function(){return null})));we.renderStatic=we.rewind;function Se(){const{setDemande:e,demande:t}=(0,i.useContext)(l.R),[n,s]=i.useState([]),[d,h]=i.useState([]),[y,b]=i.useState(""),j=(0,v.v9)((e=>{var t;return null===(t=e.reponse)||void 0===t?void 0:t.postId}));(0,i.useEffect)((()=>{let e=d.filter((e=>e.idDemande!==j));s(p().groupBy(e,"zone.denomination"))}),[j]),(0,i.useEffect)((()=>{const e=setInterval((()=>{(async()=>{try{const e=await u.Z.get("".concat(a.V6,"/toutesDemandeAttente"),a.vc);201===e.status&&"token expired"===e.data?(localStorage.removeItem("auth"),window.location.replace("/login")):(h(e.data),s(p().groupBy(e.data,"zone.denomination")),b(""))}catch(y){"ERR_NETWORK"===y.code&&b("Rassurez-vous que votre appareil a une connexion active")}})()}),3e4);return()=>clearInterval(e)}),[]);const[C,T]=i.useState(""),w=()=>(0,g.jsx)(g.Fragment,{children:n&&Object.keys(n).map((i=>(0,g.jsxs)("div",{children:[(0,g.jsx)(r.ZP,{className:"regionDemande",onClick:()=>T(i),children:(0,g.jsxs)("p",{children:[i," ",(0,g.jsx)("span",{className:"nombre",children:n[""+i].length})," "]})}),C===i&&n[""+i].map(((n,r)=>{var i;return(0,g.jsx)(o.Z,{onClick:t=>{t.stopPropagation(),e(n)},style:{cursor:"pointer",padding:"5px",marginBottom:"4px"},className:t&&t._id===n._id?"colorGreen":"",children:(0,g.jsxs)("div",{className:"allP",children:[(0,g.jsxs)("p",{children:[" ",null===(i=n.shopAgent)||void 0===i?void 0:i.shop,"; ",n.codeclient&&"undefined"!==n.codeclient&&n.codeclient," ",n.statut," ",n.agent.codeAgent]}),(0,g.jsxs)("p",{style:{fontSize:"9px"},children:[n.agent.nom,(0,g.jsx)("span",{style:{fontSize:"9px",float:"right"},children:c()(n.createdAt).fromNow()})]})]})},r)}))]},i)))}),S=[{id:0,component:(0,g.jsx)(w,{})},{id:1,component:(0,g.jsx)(x,{setError:b})}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(we,{children:(0,g.jsxs)("title",{children:["(",""+d.length,") demandes"]})}),""!==y&&(0,g.jsx)(m.Z,{type:"warning",message:y}),(0,g.jsx)(f.Z,{titres:[{id:0,label:"En attente"},{id:1,label:"Non conforme"}],components:S})]})}const Oe=i.memo(Se);var Ae=n(270501),Ee=n(108262);n(208890);const Ze=function(){return(0,g.jsx)(Ae.Z,{sx:{padding:"5px"},children:(0,g.jsxs)(r.ZP,{container:!0,children:[(0,g.jsx)(r.ZP,{item:!0,xs:12,md:5,lg:4,sm:5,children:(0,g.jsx)(Oe,{})}),(0,g.jsx)(r.ZP,{item:!0,xs:12,md:7,lg:8,sm:7,sx:{paddingLeft:"30px"},children:(0,g.jsx)(Ee.Z,{})})]})})}},671843:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var i,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))n.call(i,l)&&(s[l]=i[l]);if(t){a=t(i);for(var u=0;u<a.length;u++)r.call(i,a[u])&&(s[a[u]]=i[a[u]])}}return s}},938095:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,o="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,c,l,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(!i(e[c],a[c]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!a.has(c.value[0]))return!1;for(u=e.entries();!(c=u.next()).done;)if(!i(c.value[1],a.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!a.has(c.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(e[c]!==a[c])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(c=s;0!==c--;)if(!Object.prototype.hasOwnProperty.call(a,l[c]))return!1;if(t&&e instanceof Element)return!1;for(c=s;0!==c--;)if(("_owner"!==l[c]&&"__v"!==l[c]&&"__o"!==l[c]||!e.$$typeof)&&!i(e[l[c]],a[l[c]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return i(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},954063:(e,t,n)=>{"use strict";var r,o=n(747313),i=(r=o)&&"object"===typeof r&&"default"in r?r.default:r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!==typeof r)throw new Error("Expected WrappedComponent to be a React component.");var c,l=[];function u(){c=e(l.map((function(e){return e.props}))),d.canUseDOM?t(c):n&&(c=n(c))}var d=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.peek=function(){return c},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=c;return c=void 0,l=[],e};var a=o.prototype;return a.UNSAFE_componentWillMount=function(){l.push(this),u()},a.componentDidUpdate=function(){u()},a.componentWillUnmount=function(){var e=l.indexOf(this);l.splice(e,1),u()},a.render=function(){return i.createElement(r,this.props)},o}(o.PureComponent);return a(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),a(d,"canUseDOM",s),d}}},208890:()=>{},421331:()=>{}}]);